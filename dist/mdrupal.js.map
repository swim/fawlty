{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","build.js","core/class/request.js","core/class/rest.js","core/queue.js","core/request.js"],"names":[],"mappings":"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","file":"mdrupal.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * @file\n * build.js\n */\n\nvar mdrupal = {\n  request: require('./core/request.js'),\n  queue: require('./core/queue.js')\n}\n\nmodule.exports = mdrupal;","/**\n * @file\n * request.js\n *\n * m.request class wrapper for Drupal requests.\n */\n\nclass Request {\n  constructor(options) {\n    this.response = [];\n    this.cache = [];\n\n    // Default options\n    this.redrawTimeout = options.redrawTimeout ? options.redrawTimeout : 0;\n    this.redrawPerQueue = options.redrawPerQueue ? options.redrawPerQueue : false;\n    this.basePath = options.basePath ? options.basePath : '';\n\n    // Request params\n    this.options = options.data;\n    this.options.url = this.basePath + this.options.url;\n\n    this.params();\n  }\n\n  params() {\n    this.process();\n  }\n\n  process() {\n    var index = this.cacheIndex(this.options.url, this.options.data);\n\n    if (!this.cache[index]) {\n      var completed = m.prop(false)\n      var complete = function(value) {\n        completed(true)\n\n        delete this.cache[index];\n        return value;\n      }.bind(this)\n\n      var background = this.options.background ? true : false;\n      var timeout = this.redrawTimeout;\n\n      this.cache[index] = {\n        data: m.request(this.options).then(complete, complete).then(function(value) {\n          if (background) {\n            // (virtual) DOM renders too quick.\n            // Set minimum wait for redraw time.\n            setTimeout(function() {\n              m.redraw()\n            }, timeout)\n          }\n\n          return value;\n        }),\n        status: completed\n      };\n    }\n\n    this.response = this.cache[index];\n  }\n\n  cacheIndex(url, data) {\n    return JSON.stringify({url: url, query: data});\n  }\n}\n\nmodule.exports = Request;","/**\n * @file\n * rest.js\n *\n * Format request params for Drupal REST to parse.\n *\n * @todo, allow option to set auth type used.\n * @todo, check to ensure config is not already set.\n * @todo, pass format type as option.\n */\nimport Request from './request';\n\nclass Rest extends Request {\n  params() {\n    // Set format type.\n    this.options.url += '?_format=json';\n\n    // Set basic HTTP auth.\n    this.options.config = function(xhr) {\n      xhr.setRequestHeader('Authorization', '');\n    }\n\n    super.process();\n  }\n}\n\nmodule.exports = Rest;","/**\n * @file\n * queue.js\n *\n * Provides util functionality for queuing requests.\n *\n * @todo, support easy entity loading.\n * @todo, support additional params passed.\n */\nvar request = require('./request.js');\n\nvar queue = (function() {\n  var vm = {};\n\n  vm.queue = function(options) {\n    var response = [];\n\n    for (var i = 0; i < options.request.length; i++) {\n      response.push(request(options.request[i]));\n    }\n\n    return response;\n  }\n\n  return vm;\n}())\n\nmodule.exports = queue.queue;","/**\n * @file\n * request.js\n *\n * Abstracts the request class.\n */\nimport Rest from './class/rest';\n\nvar request = (function() {\n  var vm = {};\n\n  vm.request = function(params) {\n    return new Rest({data: params}).response;\n  }\n\n  return vm;\n}())\n\nmodule.exports = request.request;"]}