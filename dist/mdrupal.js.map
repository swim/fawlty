{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","build.js","core/request.js","core/services.js"],"names":[],"mappings":"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","file":"mdrupal.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * @file\n * build.js\n */\n\n// Expose user and config info.\n// window.Drupal = require('./src/common.js');\n\n// mdrupal core modules.\n/*var mdrupal = require('./src/core/request.js');\nmdrupal.core = {\n  system: require('./src/core/system.js')\n}\n\n// @todo, bulkify module requires.\nmdrupal.modules = {\n  services: require('./src/modules/services/services.js'),\n}*/\n\nvar mdrupal = {\n  request: require('./core/request.js'),\n  services: require('./core/services.js')\n}\n\nmodule.exports = mdrupal;","/**\n * @file\n * request.js\n *\n * m.request class wrapper for Drupal requests.\n */\n\nclass Request {\n  constructor(options) {\n    this.response = [];\n    this.cache = [];\n\n    // Defaults\n    this.redrawTimeout = options.redrawTimeout ? options.redrawTimeout : 0;\n    this.redrawPerQueue = options.redrawPerQueue ? options.redrawPerQueue : false;\n    this.basePath = options.basePath ? options.basePath : '/drupal';\n\n    this.params(options);\n  }\n\n  params(options) {\n    this.options = options.data;\n    this.options.url = this.basePath + this.options.url;\n\n    this.process();\n  }\n\n  queue(options) {\n    for (var i = 0; i < options.length; i++) {\n      this.params({data: options[i]});\n    }\n\n    return this.response;\n  }\n\n  process() {\n    var index = this.cacheIndex(this.options.url, this.options.data);\n\n    if (!this.cache[index]) {\n      this.cache[index] = [];\n\n      var completed = m.prop(false)\n      var complete = function(value) {\n        completed(true)\n\n        delete this.cache[index];\n        return value;\n      }.bind(this)\n\n      var background = this.options.background ? true : false;\n      var timeout = this.redrawTimeout;\n\n      this.cache[index] = {\n        data: m.request(this.options).then(complete, complete).then(function(value) {\n          if (background) {\n            // (virtual) DOM renders too quick.\n            // Set minimum wait for redraw time.\n            setTimeout(function() {\n              m.redraw()\n            }, timeout)\n          }\n\n          return value;\n        }),\n        status: completed\n      };\n    }\n\n    this.response.push(this.cache[index]);\n  }\n\n  cacheIndex(url, data) {\n    return JSON.stringify({url: url, query: data});\n  }\n\n  /**\n   * @todo, process per queue group?\n   */\n  processQueue() {\n\n  }\n}\n\nmodule.exports = Request;","/**\n * @file\n * services.js\n *\n * Services handling for mdrupal; extends request\n * functionality.\n *\n * Please see https://www.drupal.org/project/services.\n */\nimport Request from './request';\n\nclass Services extends Request {\n  process() {\n    // var options = super.process();\n  }\n}\n\nmodule.exports = Services;"]}